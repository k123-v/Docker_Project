{
"builders" : [
    {
        "type" : "amazon-ebs",
        "region" : "us-east-1",
        "instance_type" : "t2.micro",
        "source_ami" : "ami-0747bdcabd34c712a",
        "ssh_username" : "ubuntu",
        "ami_name" : "myfirstamipacker",
        "tags" : {
            "Name":"mypackeraminew"
        }
    
    }

],
"provisioners" : [
    {
        "type" : "shell",
        "inline": [
         "sudo apt update",
         "sudo apt install software-properties-common",
         "sudo apt install python3.8 -y",
         "sudo apt-add-repository --yes --update ppa:ansible/ansible",
         "sudo apt install ansible -y",
         "sudo apt install python-pip -y",
         "pip install docker",
         "sudo su",
         "cd /etc/ansible",
         "ansible --version",
         "sudo apt install apt-transport-https ca-certificates curl software-properties-common -y",
         "curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -",
         "sudo add-apt-repository 'deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable'",
         "sudo apt update",
         "apt-cache policy docker-ce",
         "sudo apt install docker-ce -y",
         "sudo groupadd docker",
         "sudo usermod -aG docker $USER",
         "sudo docker version"
        ]
    }
]
}
